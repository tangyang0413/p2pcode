$(document).ready(function(){$("#registerform").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证失败",validators:{notEmpty:{message:"用户名必填不能为空"},stringLength:{min:6,max:24,message:"用户名长度不能小于6位或超过24位"}}},password1:{validators:{notEmpty:{message:"密码必填不能为空"},stringLength:{min:6,message:"密码长度不能小于6位"}}},password2:{validators:{notEmpty:{message:"确认密码必须填写"},identical:{field:"password1",message:"两次密码输入不一致"}}},realname:{validators:{notEmpty:{message:"姓名不能为空"}}},mobile:{validators:{notEmpty:{message:"手机号码必须填写"},regexp:{regexp:/^[1][3,4,5,7,8,9][0-9]{9}$/,message:"手机号码格式不正确，格式：13900000000"}}},sex:{validators:{notEmpty:{message:"请选择性别"}}},isAgree:{validators:{notEmpty:{message:"请选择查看注册协议并同意"}}}}}).on("success.form.bv",function(a){a.preventDefault();var o=$(a.target),s=(o.data("bootstrapValidator"),o.serialize());console.log(s),$.post("api/userAdd.php",s,function(a){if(console.log("ajax返回的结果",a),$("#myModal .modal-title").text("用户注册提示"),a.isSuccess){$("#myModal .modal-body").html("<span class='glyphicon glyphicon-ok'></span>"+a.msg+"<span id='time'>5</span>秒后跳转"),$("#myModal").modal("show");var o=5,s=setInterval(function(){o--,$("#time").text(o),0==o&&(clearInterval(s),location.href="login.php")},1e3)}else $("#myModal .modal-body").html("<span class='glyphicon glyphicon-remove'></span>"),$("#myModal").modal("show"),console.log(a.msg)},"json")}),$("#loginform").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证失败",validators:{notEmpty:{message:"用户名必填不能为空"},stringLength:{min:6,max:24,message:"用户名长度不能小于6位或超过24位"}}},password1:{validators:{notEmpty:{message:"密码必填不能为空"},stringLength:{min:6,message:"密码长度不能小于6位"}}}}}).on("success.form.bv",function(a){a.preventDefault();var o=$(a.target),s=(o.data("bootstrapValidator"),o.serialize());console.log(s),$.post("api/checklogin.php",s,function(a){if(console.log("ajax返回的结果",a),$("#myModal .modal-title").text("用户登录提示"),a.isSuccess){$("#myModal .modal-body").html("<span class='glyphicon glyphicon-ok'></span>"+a.msg+"<span id='time'>5</span>秒后跳转到个人中心"),$("#myModal").modal("show");var o=5,s=setInterval(function(){o--,$("#time").text(o),0==o&&(clearInterval(s),location.href="userinfo.php")},1e3)}else $("#myModal .modal-body").html("<span class='glyphicon glyphicon-remove'></span>"),$("#myModal").modal("show"),console.log(a.msg)},"json")})});